<!DOCTYPE html>
<html>
<head>
<title>AI-CHATBOT</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<h1>AI-CHATBOT</h1>

<div id="chat"></div>

<input id="msg" placeholder="Ask AI-CHATBOT..." autofocus>
<button onclick="send()">Send</button>

<br><br>

<input type="file" id="file">
<button onclick="upload()">Upload</button>

<script>
const chat = document.getElementById("chat");
const input = document.getElementById("msg");

function add(sender, msg){
    const div = document.createElement("div");
    div.className = sender;
    div.innerText = msg;
    chat.appendChild(div);
    chat.scrollTop = chat.scrollHeight;
}

async function send(){
    if(!input.value) return;

    add("user", input.value);
    const text = input.value;
    input.value = "";

    const res = await fetch("/api/chat",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({prompt:text})
    });

    const data = await res.json();
    add("bot", data.reply);
}

async function upload(){
    const file = document.getElementById("file").files[0];
    if(!file) return alert("Select a file");

    const form = new FormData();
    form.append("file", file);

    const res = await fetch("/api/upload",{method:"POST", body:form});
    const data = await res.json();

    add("bot", data.reply);
}

// ENTER SEND
input.addEventListener("keydown", e=>{
    if(e.key==="Enter") send();
});
</script>

</body>
</html>
