<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI-CHATBOT</title>
  <style>
  :root{
    --bg:#02050a;--panel:rgba(15,22,35,0.6);--neon1:#7bf1ff;--neon2:#c86bff;--muted:rgba(180,200,220,.65)
  }
  html,body{height:100%;margin:0;font-family:system-ui,Segoe UI,Roboto;color:#dff6ff;background:radial-gradient(circle at 20% 10%,rgba(124,196,255,.05),transparent),#02050a}
  .shell{display:flex;gap:16px;height:90vh;max-width:1200px;margin:3vh auto;padding:16px}
  .hud,.visual{width:260px;background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.01));border:1px solid rgba(255,255,255,.05);border-radius:14px;padding:16px}
  .panel{flex:1;background:linear-gradient(180deg,rgba(255,255,255,.02),transparent);border-radius:14px;border:1px solid rgba(255,255,255,.05);display:flex;flex-direction:column}
  .brand{display:flex;gap:12px;align-items:center}
  .logo{width:46px;height:46px;border-radius:10px;background:linear-gradient(135deg,var(--neon1),var(--neon2));color:#001;font-weight:800;display:grid;place-items:center}
  .title{font-weight:800;letter-spacing:1px}
  .meta{font-size:12px;color:var(--muted)}
  .chat{flex:1;overflow:auto;padding:12px;display:flex;flex-direction:column;gap:12px}
  .row{display:flex}
  .row.user{justify-content:flex-end}
  .bubble{max-width:70%;padding:12px 14px;border-radius:12px;line-height:1.4}
  .user{background:linear-gradient(180deg,var(--neon1),#3fbfff);color:#002}
  .ai{background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.08)}
  .sys{color:var(--muted);font-size:13px}
  .composer{display:flex;gap:10px;border-top:1px solid rgba(255,255,255,.05);padding:12px}
  .composer input{flex:1;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.03);color:#fff}
  .btn{padding:10px 12px;border-radius:10px;border:none;cursor:pointer}
  .send{background:linear-gradient(135deg,var(--neon1),var(--neon2));color:#001;font-weight:700}
  .img{background:transparent;border:1px solid rgba(255,255,255,.1);color:#fff}
  .cursor{display:inline-block;width:8px;background:#7bf1ff;margin-left:2px;animation:blink 1s infinite}
  @keyframes blink{50%{opacity:0}}
  .thinking{animation:pulse 1.2s infinite}
  @keyframes pulse{50%{opacity:.4}}
  </style>
</head>
<body>
<div class="shell">
  <div class="hud">
    <div class="brand"><div class="logo">AI</div><div><div class="title">AI-CHATBOT</div><div class="meta">System Online</div></div></div>
  </div>
  <div class="panel">
    <div id="chat" class="chat"></div>
    <div class="composer">
      <input id="prompt" placeholder="Ask AI-CHATBOT..." />
      <button class="btn send" id="send">Send</button>
      <button class="btn img" id="image">Image</button>
    </div>
  </div>
  <div class="visual"></div>
</div>
<script>
const chat=document.getElementById('chat');const p=document.getElementById('prompt');
function row(cls){const r=document.createElement('div');r.className='row '+cls;return r}
function bubble(cls){const b=document.createElement('div');b.className='bubble '+cls;return b}
function addUser(t){const r=row('user');const b=bubble('user');b.textContent=t;r.appendChild(b);chat.appendChild(r)}
function addAI(){const r=row('');const b=bubble('ai');const c=document.createElement('span');c.className='cursor';b.appendChild(c);r.appendChild(b);chat.appendChild(r);return b}
function scroll(){chat.scrollTop=chat.scrollHeight}
function type(el,text){let i=0;const cur=el.querySelector('.cursor');const interval=setInterval(()=>{if(i>=text.length){cur.remove();clearInterval(interval);return;}el.insertBefore(document.createTextNode(text[i++]),cur);scroll();},25)}
function thinking(){const s=document.createElement('div');s.className='sys thinking';s.textContent='Thinking...';chat.appendChild(s);return s}
async function sendChat(){const v=p.value.trim();if(!v)return;addUser(v);p.value='';const t=thinking();const res=await fetch('/api/chat',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({prompt:v})});const j=await res.json();t.remove();const b=addAI();type(b,j.reply||'No reply');}
async function sendImage(){const v=p.value.trim();if(!v)return;addUser(v);p.value='';const t=thinking();const res=await fetch('/api/generate',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({prompt:v})});const j=await res.json();t.remove();const r=row('');const b=bubble('ai');b.innerHTML=`<img src="data:image/png;base64,${j.image}" style="max-width:360px;border-radius:8px"/>`;r.appendChild(b);chat.appendChild(r);}

document.getElementById('send').onclick=sendChat;document.getElementById('image').onclick=sendImage;
addAI();type(chat.lastChild.querySelector('.bubble'),"Welcome. AI-CHATBOT is online.");
</script>
</body>
</html>
