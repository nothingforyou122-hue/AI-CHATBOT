<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI-CHATBOT</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="layout">

  <aside class="sidebar">
    <div class="logo">AI-CHATBOT</div>
    <div class="status">System Online</div>
  </aside>

  <main class="panel">
    <div id="chat" class="chat-box"></div>

    <div class="input-area">
      <input id="msg" placeholder="Ask AI-CHATBOT..." autofocus>
      <button onclick="send()">Send</button>
    </div>

    <div class="file-area">
      <input type="file" id="file">
      <button onclick="upload()">Upload</button>
    </div>
  </main>

</div>

<script>
const chat = document.getElementById("chat");
const input = document.getElementById("msg");

function add(type, text){
  const div = document.createElement("div");
  div.className = type;
  div.innerText = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

async function send(){
  if(!input.value.trim()) return;
  add("user", input.value);
  const msg = input.value;
  input.value = "";

  const res = await fetch("/api/chat", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({prompt: msg})
  });

  const data = await res.json();
  add("bot", data.reply || "No response");
}

async function upload(){
  const file = document.getElementById("file").files[0];
  if(!file) return alert("Choose file");
  
  const form = new FormData();
  form.append("file", file);

  const res = await fetch("/api/upload", {method:"POST", body:form});
  const data = await res.json();
  add("bot", data.reply);
}

input.addEventListener("keydown", e => {
  if(e.key === "Enter") send();
});
</script>

</body>
</html>
