<!DOCTYPE html>
<html>
<head>
  <title>AI-CHATBOT</title>
</head>
<body>

<h2>AI-CHATBOT</h2>

<div id="chatbox"></div>

<input id="msg" placeholder="Ask AI-CHATBOT..." />
<button onclick="send()">Send</button>

<br><br>

<input type="file" id="file">
<button onclick="upload()">Upload</button>

<script>

function add(text){
  let d = document.createElement("div");
  d.innerText = text;
  document.getElementById("chatbox").appendChild(d);
}

async function send(){
  let text = msg.value;
  add("You: " + text);
  msg.value = "";

  let res = await fetch("/api/chat", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({prompt:text})
  });

  let data = await res.json();
  add("AI: " + data.reply);
}

async function upload(){
  let file = document.getElementById("file").files[0];
  if(!file) return alert("Choose a file");

  let form = new FormData();
  form.append("file", file);

  let res = await fetch("/api/upload", {
    method: "POST",
    body: form
  });

  let data = await res.json();
  add("System: " + data.message);
}

</script>

</body>
</html>
