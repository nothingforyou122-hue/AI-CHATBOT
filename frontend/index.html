<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>AI-CHATBOT</title>
<link rel="stylesheet" href="style.css"/>
</head>
<body>

<div class="app">

  <!-- LEFT PANEL -->
  <div class="sidebar">
    <div class="logo">AI</div>
    <h2>AI-CHATBOT</h2>
    <span>System Online</span>
  </div>

  <!-- CHAT PANEL -->
  <div class="chat-area">

    <div class="status">Welcome. AI-CHATBOT is online.</div>
    <div id="chatBox"></div>

    <div class="input-area">
      <input id="msg" placeholder="Ask AI-CHATBOT..." />
      <button onclick="send()">Send</button>
      <button onclick="generate()">Image</button>
    </div>

  </div>

  <!-- RIGHT PANEL -->
  <div class="panel"></div>

</div>

<script>
const chat = document.getElementById("chatBox");
const input = document.getElementById("msg");

function bubble(type, text){
  let div = document.createElement("div");
  div.className = "bubble " + type;
  div.innerText = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

async function send(){
  if(!input.value.trim()) return;

  bubble("user", input.value);
  let q = input.value;
  input.value = "";

  let r = await fetch("/api/chat", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({prompt:q})
  });

  const data = await r.json();
  bubble("bot", data.reply);
}

async function generate(){
  if(!input.value.trim()) return;
  bubble("user", "/img " + input.value);

  let r = await fetch("/api/generate", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({prompt: input.value})
  });

  let d = await r.json();
  let img = document.createElement("img");
  img.src = "data:image/png;base64," + d.image;
  img.className = "image";

  chat.appendChild(img);
  input.value="";
}

input.addEventListener("keydown", e=>{
  if(e.key==="Enter") send();
});
</script>

</body>
</html>
